const testUtil = require('../test-util');
const nodeTestHelper = testUtil.nodeTestHelper;
const {FlowBuilder} = require('../flow-builder');
const circuitDiagramNode = require('../../nodes/quantum/circuit-diagram/circuit-diagram.js');
const snippets = require('../../nodes/snippets.js');
const errors = require('../../nodes/errors');

const flow = new FlowBuilder();

describe('CircuitDiagramNode', function() {
  beforeEach(function(done) {
    nodeTestHelper.startServer(done);
  });

  afterEach(function(done) {
    flow.reset();
    nodeTestHelper.unload();
    nodeTestHelper.stopServer(done);
  });

  it('load node', function(done) {
    testUtil.isLoaded(circuitDiagramNode, 'circuit-diagram', done);
  });

  it('execute command', function(done) {
    let command = snippets.CIRCUIT_DIAGRAM + snippets.ENCODE_IMAGE;
    flow.add('quantum-circuit', 'n0', [['n1']], {structure: 'qubits', outputs: '1', qbitsreg: '1', cbitsreg: '1'});
    flow.add('hadamard-gate', 'n1', [['n2']]);
    flow.add('measure', 'n2', [['n3']], {selectedBit: '0'});
    flow.add('circuit-diagram', 'n3', [['n4']]);
    flow.addOutput('n4');

    testUtil.commandExecuted(flow, command, done);
  });

  it('should fail on receiving input from non-quantum nodes', function(done) {
    flow.add('circuit-diagram', 'n1', [['n2']]);
    flow.addOutput('n2');

    const givenInput = {payload: '', topic: ''};
    const expectedMessage = errors.NOT_QUANTUM_NODE;
    testUtil.nodeFailed(flow, givenInput, expectedMessage, done);
  });

  it('should fail on receiving non-qubit object', function(done) {
    flow.add('circuit-diagram', 'n1', [['n2']]);
    flow.addOutput('n2');

    const givenInput = {payload: {structure: '', qubit: 3}, topic: 'Quantum Circuit'};
    const expectedMessage = errors.NOT_QUBIT_OBJECT;
    testUtil.nodeFailed(flow, givenInput, expectedMessage, done);
  });

  it('should return correct output', function(done) {
    flow.add('quantum-circuit', 'qc', [['qr']],
      {structure: 'registers', outputs: '1', qbitsreg: '1', cbitsreg: '0'});
    flow.add('quantum-register', 'qr', [['cd'],['cd']], {outputs: 2});
    flow.add('circuit-diagram', 'cd', [['out']]);

    flow.addOutput('out');

    const givenInput = {payload: ''};
    const expectedOutput = `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`;
    testUtil.correctOutputReceived(flow, givenInput, expectedOutput, done);
  });
});
